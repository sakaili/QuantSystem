# ç­–ç•¥å‚æ•°é…ç½®
# Strategy Configuration
version: "1.0"

# è´¦æˆ·é…ç½® - Account Settings
account:
  # size: 100.0                 # å·²ç§»é™¤:ä¸å†ç¡¬ç¼–ç è´¦æˆ·è§„æ¨¡,æ”¹ä¸ºå¯åŠ¨æ—¶åŠ¨æ€è·å–
  usage_ratio: 0.9              # èµ„é‡‘ä½¿ç”¨ç‡(90%ç”¨äºäº¤æ˜“,10%ä½œç¼“å†²)
  leverage: 2                   # æ æ†å€æ•°
  order_type: "post_only"       # è®¢å•ç±»å‹(ä»…Makerè®¢å•)
  maker_fee: 0.0002             # Makeræ‰‹ç»­è´¹ 0.02%

# ç½‘æ ¼é…ç½® - Grid Settings
grid:
  count: 10                     # ç½‘æ ¼æ€»æ•° (ä»20æ”¹ä¸º10)
  spacing: 0.015                # ç½‘æ ¼é—´è·(1.5%)
  upper_grids: 5                # ä¸Šæ–¹ç½‘æ ¼æ•°(å¼€ç©º,ä»10æ”¹ä¸º5)
  lower_grids: 5                # ä¸‹æ–¹ç½‘æ ¼æ•°(å¹³ç©º,ä»10æ”¹ä¸º5)

  # ç½‘æ ¼ä¿®å¤é…ç½®
  repair_enabled: true          # å¯ç”¨è‡ªåŠ¨ä¿®å¤
  repair_interval: 10           # æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡
  max_repair_retries: 3         # å•ä¸ªç½‘æ ¼æœ€å¤šé‡è¯•3æ¬¡
  min_success_rate_upper: 0.8   # ä¸Šæ–¹ç½‘æ ¼æœ€ä½80%æˆåŠŸç‡
  min_success_rate_lower: 0.8   # ä¸‹æ–¹ç½‘æ ¼æœ€ä½80%æˆåŠŸç‡

  # ç§»åŠ¨ç½‘æ ¼é…ç½®ï¼ˆæ— é™ç½‘æ ¼ç­–ç•¥ï¼‰
  dynamic_expansion: true       # å¯ç”¨åŠ¨æ€æ‰©å±•
  max_total_grids: 999          # æœ€å¤§æ€»ç½‘æ ¼æ•°ï¼ˆè®¾ä¸º999å®ç°æ— é™ç½‘æ ¼ï¼‰
  max_side_grids: 999           # å•ä¾§æœ€å¤šç½‘æ ¼æ•°ï¼ˆè®¾ä¸º999å®ç°æ— é™ç½‘æ ¼ï¼‰

# ä»“ä½é…ç½® - Position Settings
position:
  max_symbols: 2                # æœ€å¤šæŒä»“å¸ç§æ•°(2ä¸ªå“ç§åŒæ—¶äº¤æ˜“)
  base_margin: 30.0             # ğŸ”§ FIX: åŸºç¡€ä»“ä½ä¿è¯é‡‘(USDT,æ¯å“ç§) - ä»35é™è‡³30ä»¥ç¬¦åˆ90%èµ„é‡‘çº¦æŸ
  grid_margin: 10.0             # ğŸ”§ FIX: å•ç½‘æ ¼ä¿è¯é‡‘(USDT,æ¯å“ç§) - ä»15é™è‡³13ä»¥ç¬¦åˆ90%èµ„é‡‘çº¦æŸ
  manual_symbols: [1000WHYUSDT]            # æ‰‹åŠ¨æŒ‡å®šå¿…å¼€å¸ç§(å ç”¨max_symbolsé…é¢), ä¾‹: ["BTCUSDT", "ETHUSDT"]
  min_base_position_ratio: 0.6  # æœ€å°ä¿ç•™åŸºç¡€ä»“ä½æ¯”ä¾‹(60%)
  # single_symbol_max: æ”¹ä¸ºåŠ¨æ€è®¡ç®— = (è´¦æˆ·ä½™é¢ Ã— 0.9) / 5
  # total_margin_limit: æ”¹ä¸ºåŠ¨æ€è®¡ç®— = è´¦æˆ·ä½™é¢ Ã— 0.9

# å¸ç§ç­›é€‰ - Screening Criteria
screening:
  bottom_n: 50                  # æµåŠ¨æ€§æ’åå€’æ•°N
  min_listing_days: 300         # æœ€å°ä¸Šå¸‚å¤©æ•°
  funding_rate_floor: 0.0       # èµ„é‡‘è´¹ç‡ä¸‹é™(>0,å¤šå¤´ä»˜è´¹ç»™ç©ºå¤´)
  atr_spike_multiplier: 3.0     # ATRæš´æ¶¨å€æ•°é˜ˆå€¼
  funding_rate_sort: true       # æ˜¯å¦æŒ‰å†å²ç´¯è®¡èµ„é‡‘è´¹ç‡æ’åº
  funding_rate_lookback_days: 0 # ç»Ÿè®¡çª—å£(0=å°½å¯èƒ½å…¨å†å²)
  funding_rate_min_sum: 0.0     # æœ€å°ç´¯è®¡èµ„é‡‘è´¹ç‡(ç­›é€‰ç”¨)
  eth_deviation_filter: true    # å¯ç”¨ETHåç¦»ç­›é€‰
  eth_deviation_window: 60      # æ»šåŠ¨çª—å£(å¤©)
  eth_deviation_cooldown_days: 365       # æœ€è¿‘Nå¤©å‘ç”Ÿåç¦»ç›´æ¥å‰”é™¤
  eth_deviation_rate_window_days: 180    # ç»Ÿè®¡åç¦»é¢‘ç‡çª—å£
  eth_deviation_ever: true               # è±å…æ¨¡å¼ï¼šåªçœ‹æœ€è¿‘Nå¤©æ˜¯å¦åç¦»
  eth_corr_drop_threshold: 0.2           # corr_dropé˜ˆå€¼
  eth_corr_drop_rate_limit: 0.05         # corr_dropé¢‘ç‡ä¸Šé™
  eth_residual_z: 2.5                    # æ®‹å·®zé˜ˆå€¼
  eth_residual_rate_limit: 0.01          # æ®‹å·®åç¦»é¢‘ç‡ä¸Šé™
  binance_component_max_weight: 0.8      # Binanceæˆåˆ†å æ¯”ä¸Šé™(<=80%)
  binance_component_weight_strict: true  # æ— æ³•è·å–å æ¯”æ—¶æ˜¯å¦å‰”é™¤
  air_mean_deviation_filter: true        # å¯ç”¨åƒåœ¾å¸å‡å€¼åç¦»ç­›é€‰
  air_mean_use_median: true              # ä½¿ç”¨ä¸­ä½æ•°(æ›´æŠ—æç«¯å€¼)
  air_mean_deviation_window: 60          # æ»šåŠ¨çª—å£(å¤©)
  air_mean_deviation_cooldown_days: 365  # æœ€è¿‘Nå¤©å‘ç”Ÿåç¦»ç›´æ¥å‰”é™¤
  air_mean_deviation_rate_window_days: 180  # ç»Ÿè®¡åç¦»é¢‘ç‡çª—å£
  air_mean_deviation_ever: true          # è±å…æ¨¡å¼ï¼šåªçœ‹æœ€è¿‘Nå¤©æ˜¯å¦åç¦»
  air_mean_corr_drop_threshold: 0.2      # corr_dropé˜ˆå€¼
  air_mean_corr_drop_rate_limit: 0.05    # corr_dropé¢‘ç‡ä¸Šé™
  air_mean_residual_z: 2.5               # æ®‹å·®zé˜ˆå€¼
  air_mean_residual_rate_limit: 0.01     # æ®‹å·®åç¦»é¢‘ç‡ä¸Šé™

# äº¤æ˜“æ—¶é—´ - Schedule
schedule:
  scan_hour: 0                  # æ¯æ—¥ç­›é€‰æ—¶é—´(UTCå°æ—¶)
  scan_interval: 86400          # ç­›é€‰é—´éš”(ç§’)
  monitor_interval: 10          # ç›‘æ§å¾ªç¯é—´éš”(ç§’)

# æ¢ä»“é…ç½® - Rebalancing Settings
rebalancing:
  enabled: true                  # å¯ç”¨ç›ˆåˆ©æ¢ä»“ï¼ˆå½“ç›ˆåˆ©è¾¾æ ‡ä¸”ä¸åœ¨å€™é€‰å¸ä¸­æ—¶ï¼‰
  profit_threshold: 0.15        # ç›ˆåˆ©ç›®æ ‡(15%)
  cooldown_hours: 24            # å†·å´æœŸ(å°æ—¶)
  max_rebalances_per_day: 3     # å•æ—¥æœ€å¤§æ¢ä»“æ¬¡æ•°

# Web ä»ªè¡¨æ¿é…ç½® - Web Dashboard Settings
web_dashboard:
  enabled: true                  # å¯ç”¨ Web ä»ªè¡¨æ¿
  host: "0.0.0.0"               # ç›‘å¬åœ°å€ (0.0.0.0 å…è®¸å¤–éƒ¨è®¿é—®)
  port: 5000                    # ç›‘å¬ç«¯å£
  debug: false                  # è°ƒè¯•æ¨¡å¼
